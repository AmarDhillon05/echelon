{"ast":null,"code":"var _jsxFileName = \"/home/adhillon053/echelon/client/src/routes/Leaderboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport Navbar from \"../components/Navbar\";\nimport axios from \"axios\";\nimport pako from 'pako';\n\n//For input amount == 'any' logic\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MultipleInputList({\n  req\n}) {\n  _s();\n  const [inputs, setInputs] = useState([\"\"]);\n  const [captions, setCaptions] = useState([\"\"]);\n  const addInput = () => {\n    setInputs([...inputs, \"\"]);\n  };\n  const removeInput = index => {\n    setInputs(inputs.filter((_, i) => i !== index));\n  };\n  const addCaption = () => {\n    setInputs([...captions, \"\"]);\n  };\n  const removeCaption = index => {\n    setInputs(captions.filter((_, i) => i !== index));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [inputs.map((_, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-2 flex items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: [\"text\", \"link\"].includes(req.type) ? \"text\" : \"file\",\n        name: `${req.name} ${index}`,\n        id: `${req.name} ${index}`,\n        className: \"bg-black text-white p-2 rounded w-full border border-purple-700\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 11\n      }, this), inputs.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => removeInput(index),\n        className: \"text-red-500 px-2 py-1\",\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: addInput,\n      className: \"mt-1 text-purple-400 text-sm hover:underline\",\n      children: \"+ Add another\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n}\n_s(MultipleInputList, \"qIrWRz+j9KJMQCQrrFTr6oCI+/o=\");\n_c = MultipleInputList;\nexport default function Leaderboard() {\n  _s2();\n  const navigate = useNavigate();\n  const api_link = \"http://localhost:2022/api\";\n  const {\n    id\n  } = useParams();\n\n  //Data is going to be shortened via these funcs to save memory\n  //Used everywhere flexibly except in embeddings where obviously we need \n  //the original string, and is only needed for files\n  async function compressFileToBase64(file) {\n    const arrayBuffer = await file.arrayBuffer();\n    const uint8Array = new Uint8Array(arrayBuffer);\n\n    // Compress using pako (deflate)\n    const compressed = pako.deflate(uint8Array);\n\n    // Convert to base64 safely\n    const base64 = uint8ArrayToBase64(compressed).replace(/\\+/g, '-') // URL-safe base64\n    .replace(/\\//g, '_').replace(/=+$/, '');\n    return {\n      base64,\n      mimeType: file.type || 'application/octet-stream'\n    };\n  }\n  function uint8ArrayToBase64(uint8Array) {\n    // Avoids call stack limits by processing in chunks\n    let binary = '';\n    const len = uint8Array.length;\n    const chunkSize = 0x8000;\n    for (let i = 0; i < len; i += chunkSize) {\n      binary += String.fromCharCode.apply(null, uint8Array.subarray(i, i + chunkSize));\n    }\n    return btoa(binary);\n  }\n  const [ld, setLd] = useState({});\n  const [contributors, setContributors] = useState([]);\n  const [currentContributor, setCurrentContributor] = useState(\"\");\n  const [user, setUser] = useState({});\n  const [contributorValid, setContributorValid] = useState(null);\n  useEffect(() => {\n    const userObj = localStorage.getItem(\"user\");\n    if (!userObj) navigate(\"/login\");else setUser(JSON.parse(userObj));\n    updateLd();\n  }, []);\n  async function updateLd() {\n    const {\n      data\n    } = await axios.post(api_link + \"/leaderboard/getLeaderboardById\", {\n      id\n    });\n    const ldb = data.leaderboard;\n    ldb.id = id;\n    setLd(ldb);\n  }\n  async function confirmUser() {\n    try {\n      const {\n        data\n      } = await axios.post(api_link + \"/users/get-user-data\", {\n        username: currentContributor\n      });\n      return !data.error;\n    } catch {\n      return false;\n    }\n  }\n  useEffect(() => {\n    if (!currentContributor) return;\n    const check = async () => {\n      const valid = await confirmUser();\n      setContributorValid(valid);\n    };\n    check();\n  }, [currentContributor]);\n  async function newSubmission(e) {\n    e.preventDefault();\n    const form = document.getElementById(\"submission\");\n    const formData = new FormData(form);\n    const data = Object.fromEntries(formData.entries());\n    for (const [key, value] of Object.entries(data)) {\n      if (value instanceof File) {\n        var _ld$required$find;\n        //Case of a file\n        if (!value || value.size === 0) return;\n        const dtype = ((_ld$required$find = ld.required.find(x => x.name === key)) === null || _ld$required$find === void 0 ? void 0 : _ld$required$find.type) || \"\";\n        if (!value.type.includes(dtype)) {\n          document.getElementById(\"subErrText\").innerHTML = `Uploaded wrong file type to \"${key}\"`;\n          return;\n        }\n        data[key] = await compressFileToBase64(value);\n      } else {\n        if (!value) {\n          document.getElementById(\"subErrText\").innerHTML = \"Fill out all fields!\";\n          return;\n        }\n      }\n    }\n    const body = {\n      data,\n      contributors: [...contributors, user.username],\n      name: data.name,\n      leaderboard: ld.name\n    };\n    try {\n      const {\n        data\n      } = await axios.post(api_link + \"/leaderboard/createSubmission\", body);\n      if (data.error) {\n        document.getElementById(\"subErrText\").innerHTML = data.error;\n      } else {\n        form.reset();\n        setContributors([]);\n        setCurrentContributor(\"\");\n        setContributorValid(null);\n        document.getElementById(\"subErrText\").innerHTML = \"\";\n        document.getElementById(\"subConfText\").innerHTML = \"Successfully submitted!\";\n        await updateLd(); // Refresh leaderboard data\n      }\n    } catch {\n      document.getElementById(\"subErrText\").innerHTML = \"Unable to make the submission.\";\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-black text-white\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-row w-full p-8 gap-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1/2 bg-gray-900 shadow-[0_0_20px_#a855f7] rounded-xl p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-row align-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-4xl font-bold text-purple-400 mb-2\",\n              children: ld.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xl mb-4 text-gray-300\",\n              children: ld.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold mb-4 text-purple-300\",\n              children: [ld.n_votes ? ld.n_votes : 0, \" votes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl font-semibold mb-2 text-white\",\n          children: \"Leaderboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), ld.order && ld.order.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: ld.order.map((subname, subKey) => {\n            const sub = ld.submissions[subname];\n            if (sub) {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center bg-gray-800 px-4 py-2 rounded\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-white\",\n                  children: subname\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-4 text-sm text-gray-300\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"Rank: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-white font-semibold\",\n                      children: sub.rank\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 230,\n                      columnNumber: 32\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"ELO: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-white font-semibold\",\n                      children: parseInt(sub.elo)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 231,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 21\n                }, this)]\n              }, subKey, true, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, this);\n            } else {\n              return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 21\n              }, this);\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-400 italic\",\n          children: \"No submissions yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mt-4 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition\",\n          onClick: () => navigate(\"/rank/\" + id),\n          children: \"Start playing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1/2 bg-gray-900 shadow-[0_0_20px_#a855f7] rounded-xl p-6\",\n        children: [ld.locked && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"This submission has been locked. Check out the leaderboard!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this), !ld.locked && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-4xl font-semibold text-purple-400 mb-6\",\n            children: \"Create a Submission\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"additionalContributors\",\n              className: \"block text-lg mb-1\",\n              children: \"Additional Contributor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"additionalContributors\",\n              type: \"text\",\n              value: currentContributor,\n              onChange: e => setCurrentContributor(e.target.value),\n              className: \"bg-black text-white p-2 rounded w-full border border-purple-700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this), currentContributor && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `mt-1 text-sm ${contributorValid ? \"text-green-400\" : \"text-red-400\"}`,\n              children: contributorValid ? \"This contributor exists\" : \"This contributor doesn't exist\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"mt-2 px-4 py-2 bg-purple-700 rounded hover:bg-purple-800 transition\",\n              onClick: () => {\n                if (contributorValid && currentContributor !== \"\") {\n                  setContributors([...contributors, currentContributor]);\n                  setCurrentContributor(\"\");\n                }\n              },\n              children: \"Add\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), contributors.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-lg font-semibold mb-2\",\n              children: \"Contributors:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"space-y-2\",\n              children: contributors.map((name, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex justify-between items-center bg-gray-800 px-3 py-2 rounded\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setContributors(contributors.filter((_, i) => i !== idx)),\n                  className: \"text-red-400 hover:text-red-600\",\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 23\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            id: \"submission\",\n            onSubmit: newSubmission,\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"name\",\n                className: \"block mb-1\",\n                children: \"Submission Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"name\",\n                id: \"name\",\n                type: \"text\",\n                className: \"bg-black text-white p-2 rounded w-full border border-purple-700\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 15\n            }, this), ld.required && ld.required.map((req, key) => {\n              console.log(req);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: req.name,\n                  className: \"block mb-1\",\n                  children: [req.name, \" (\", req.type, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 21\n                }, this), req.list === \"yes\" ? req.amount === \"any\" ?\n                /*#__PURE__*/\n                // Allow dynamic number of inputs\n                _jsxDEV(MultipleInputList, {\n                  req: req\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 25\n                }, this) :\n                // Fixed number of inputs\n                Array.from({\n                  length: parseInt(req.amount) || 1\n                }).map((_, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: [\"text\", \"link\"].includes(req.type) ? \"text\" : \"file\",\n                    name: `${req.name} ${index}`,\n                    id: `${req.name} ${index}`,\n                    className: \"bg-black text-white p-2 rounded w-full border border-purple-700\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 345,\n                    columnNumber: 29\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 27\n                }, this)) :\n                /*#__PURE__*/\n                // Single input\n                _jsxDEV(\"input\", {\n                  type: [\"text\", \"link\"].includes(req.type) ? \"text\" : \"file\",\n                  name: req.name,\n                  id: req.name,\n                  className: \"bg-black text-white p-2 rounded w-full border border-purple-700\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 23\n                }, this)]\n              }, key, true, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 19\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"px-6 py-2 bg-purple-600 text-white font-semibold rounded hover:bg-purple-700 transition\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-500 mt-2\",\n            id: \"subErrText\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-green-500 mt-1\",\n            id: \"subConfText\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 201,\n    columnNumber: 5\n  }, this);\n}\n_s2(Leaderboard, \"jV6szE4sgn07Yl+x23cpGuJhayo=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c2 = Leaderboard;\nvar _c, _c2;\n$RefreshReg$(_c, \"MultipleInputList\");\n$RefreshReg$(_c2, \"Leaderboard\");","map":{"version":3,"names":["useParams","useNavigate","useState","useEffect","Navbar","axios","pako","jsxDEV","_jsxDEV","MultipleInputList","req","_s","inputs","setInputs","captions","setCaptions","addInput","removeInput","index","filter","_","i","addCaption","removeCaption","children","map","className","type","includes","name","id","fileName","_jsxFileName","lineNumber","columnNumber","length","onClick","_c","Leaderboard","_s2","navigate","api_link","compressFileToBase64","file","arrayBuffer","uint8Array","Uint8Array","compressed","deflate","base64","uint8ArrayToBase64","replace","mimeType","binary","len","chunkSize","String","fromCharCode","apply","subarray","btoa","ld","setLd","contributors","setContributors","currentContributor","setCurrentContributor","user","setUser","contributorValid","setContributorValid","userObj","localStorage","getItem","JSON","parse","updateLd","data","post","ldb","leaderboard","confirmUser","username","error","check","valid","newSubmission","e","preventDefault","form","document","getElementById","formData","FormData","Object","fromEntries","entries","key","value","File","_ld$required$find","size","dtype","required","find","x","innerHTML","body","reset","description","n_votes","order","subname","subKey","sub","submissions","rank","parseInt","elo","locked","htmlFor","onChange","target","idx","onSubmit","console","log","list","amount","Array","from","_c2","$RefreshReg$"],"sources":["/home/adhillon053/echelon/client/src/routes/Leaderboard.js"],"sourcesContent":["import { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport axios from \"axios\";\r\nimport pako from 'pako'\r\n\r\n\r\n\r\n\r\n//For input amount == 'any' logic\r\nfunction MultipleInputList({ req }) {\r\n  const [inputs, setInputs] = useState([\"\"]);\r\n  const [captions, setCaptions] = useState([\"\"]);\r\n\r\n  const addInput = () => {\r\n    setInputs([...inputs, \"\"]);\r\n  };\r\n\r\n  const removeInput = (index) => {\r\n    setInputs(inputs.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const addCaption = () => {\r\n    setInputs([...captions, \"\"]);\r\n  };\r\n\r\n  const removeCaption = (index) => {\r\n    setInputs(captions.filter((_, i) => i !== index));\r\n  };  \r\n\r\n  return (\r\n    <div>\r\n      {inputs.map((_, index) => (\r\n        <div key={index} className=\"mb-2 flex items-center gap-2\">\r\n          <input\r\n            type={[\"text\", \"link\"].includes(req.type) ? \"text\" : \"file\"}\r\n            name={`${req.name} ${index}`}\r\n            id={`${req.name} ${index}`}\r\n            className=\"bg-black text-white p-2 rounded w-full border border-purple-700\"\r\n          />\r\n          {inputs.length > 1 && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => removeInput(index)}\r\n              className=\"text-red-500 px-2 py-1\"\r\n            >\r\n              ✕\r\n            </button>\r\n          )}\r\n        </div>\r\n      ))}\r\n      <button\r\n        type=\"button\"\r\n        onClick={addInput}\r\n        className=\"mt-1 text-purple-400 text-sm hover:underline\"\r\n      >\r\n        + Add another\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nexport default function Leaderboard() {\r\n  const navigate = useNavigate();\r\n  const api_link = \"http://localhost:2022/api\";\r\n  const { id } = useParams();\r\n\r\n\r\n  //Data is going to be shortened via these funcs to save memory\r\n  //Used everywhere flexibly except in embeddings where obviously we need \r\n  //the original string, and is only needed for files\r\n  async function compressFileToBase64(file) {\r\n    const arrayBuffer = await file.arrayBuffer();\r\n    const uint8Array = new Uint8Array(arrayBuffer);\r\n\r\n    // Compress using pako (deflate)\r\n    const compressed = pako.deflate(uint8Array);\r\n\r\n    // Convert to base64 safely\r\n    const base64 = uint8ArrayToBase64(compressed)\r\n      .replace(/\\+/g, '-')   // URL-safe base64\r\n      .replace(/\\//g, '_')\r\n      .replace(/=+$/, '');\r\n\r\n    return {\r\n      base64,\r\n      mimeType: file.type || 'application/octet-stream',\r\n    };\r\n  }\r\n\r\n  function uint8ArrayToBase64(uint8Array) {\r\n    // Avoids call stack limits by processing in chunks\r\n    let binary = '';\r\n    const len = uint8Array.length;\r\n    const chunkSize = 0x8000;\r\n    for (let i = 0; i < len; i += chunkSize) {\r\n      binary += String.fromCharCode.apply(\r\n        null,\r\n        uint8Array.subarray(i, i + chunkSize)\r\n      );\r\n    }\r\n    return btoa(binary);\r\n  }\r\n        \r\n\r\n  const [ld, setLd] = useState({});\r\n  const [contributors, setContributors] = useState([]);\r\n  const [currentContributor, setCurrentContributor] = useState(\"\");\r\n  const [user, setUser] = useState({});\r\n  const [contributorValid, setContributorValid] = useState(null);\r\n\r\n\r\n  \r\n  useEffect(() => {\r\n    const userObj = localStorage.getItem(\"user\");\r\n    if (!userObj) navigate(\"/login\");\r\n    else setUser(JSON.parse(userObj));\r\n\r\n    updateLd();\r\n  }, []);\r\n\r\n  async function updateLd() {\r\n    const { data } = await axios.post(api_link + \"/leaderboard/getLeaderboardById\", { id });\r\n    const ldb = data.leaderboard;\r\n    ldb.id = id;\r\n    setLd(ldb);\r\n  }\r\n\r\n  async function confirmUser() {\r\n    try {\r\n      const { data } = await axios.post(api_link + \"/users/get-user-data\", { username: currentContributor });\r\n      return !data.error;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!currentContributor) return;\r\n    const check = async () => {\r\n      const valid = await confirmUser();\r\n      setContributorValid(valid);\r\n    };\r\n    check();\r\n  }, [currentContributor]);\r\n\r\n  async function newSubmission(e) {\r\n    e.preventDefault();\r\n    const form = document.getElementById(\"submission\");\r\n    const formData = new FormData(form);\r\n    const data = Object.fromEntries(formData.entries());\r\n\r\n    for (const [key, value] of Object.entries(data)) {\r\n      if (value instanceof File) { //Case of a file\r\n        if (!value || value.size === 0) return;\r\n\r\n        const dtype = ld.required.find((x) => x.name === key)?.type || \"\";\r\n        if (!value.type.includes(dtype)) {\r\n          document.getElementById(\"subErrText\").innerHTML = `Uploaded wrong file type to \"${key}\"`;\r\n          return;\r\n        }\r\n        \r\n        data[key] = await compressFileToBase64(value)\r\n  \r\n      } else {\r\n        if (!value) {\r\n          document.getElementById(\"subErrText\").innerHTML = \"Fill out all fields!\";\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    const body = {\r\n      data,\r\n      contributors: [...contributors, user.username],\r\n      name: data.name,\r\n      leaderboard: ld.name,\r\n    };\r\n\r\n    try {\r\n      const { data } = await axios.post(api_link + \"/leaderboard/createSubmission\", body);\r\n      if (data.error) {\r\n        document.getElementById(\"subErrText\").innerHTML = data.error;\r\n      } else {\r\n        form.reset();\r\n        setContributors([]);\r\n        setCurrentContributor(\"\");\r\n        setContributorValid(null);\r\n        document.getElementById(\"subErrText\").innerHTML = \"\";\r\n        document.getElementById(\"subConfText\").innerHTML = \"Successfully submitted!\";\r\n        await updateLd(); // Refresh leaderboard data\r\n      }\r\n    } catch {\r\n      document.getElementById(\"subErrText\").innerHTML = \"Unable to make the submission.\";\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-black text-white\">\r\n      <Navbar />\r\n\r\n      <div className=\"flex flex-row w-full p-8 gap-8\">\r\n        {/* LEFT: Leaderboard */}\r\n        <div className=\"w-1/2 bg-gray-900 shadow-[0_0_20px_#a855f7] rounded-xl p-6\">\r\n\r\n          <div className = \"flex flex-row align-center\">\r\n            <div>\r\n              <h1 className=\"text-4xl font-bold text-purple-400 mb-2\">{ld.name}</h1>\r\n              <p className=\"text-xl mb-4 text-gray-300\">{ld.description}</p>\r\n            </div>\r\n            <div className = \"ml-auto\">\r\n              <p className = \"text-2xl font-bold mb-4 text-purple-300\">{\r\n                  ld.n_votes ? ld.n_votes : 0\r\n                } votes</p>\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"text-3xl font-semibold mb-2 text-white\">Leaderboard</h2>\r\n          {ld.order && ld.order.length > 0 ? (\r\n            <div className=\"space-y-2\">\r\n              {ld.order.map((subname, subKey) => {\r\n                const sub = ld.submissions[subname];\r\n                if(sub){\r\n                  return (\r\n                  <div key={subKey} className=\"flex justify-between items-center bg-gray-800 px-4 py-2 rounded\">\r\n                    <p className=\"text-white\">{subname}</p>\r\n                    <div className=\"flex gap-4 text-sm text-gray-300\">\r\n                      <p>Rank: <span className=\"text-white font-semibold\">{sub.rank}</span></p>\r\n                      <p>ELO: <span className=\"text-white font-semibold\">{parseInt(sub.elo)}</span></p>\r\n                    </div>\r\n                  </div>\r\n                );\r\n                }\r\n                else{\r\n                  return (\r\n                    <div></div>\r\n                  )\r\n                }\r\n                \r\n              })}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-gray-400 italic\">No submissions yet.</p>\r\n          )}\r\n\r\n          <button\r\n            className=\"mt-4 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition\"\r\n            onClick={() => navigate(\"/rank/\" + id)}\r\n          >\r\n            Start playing\r\n          </button>\r\n        </div>\r\n\r\n        {/* RIGHT: Submission Form */}\r\n        <div className=\"w-1/2 bg-gray-900 shadow-[0_0_20px_#a855f7] rounded-xl p-6\">\r\n          \r\n          {ld.locked && \r\n            <p>This submission has been locked. Check out the leaderboard!</p>\r\n          }\r\n\r\n          {!ld.locked && <div>\r\n            <h1 className=\"text-4xl font-semibold text-purple-400 mb-6\">Create a Submission</h1>\r\n\r\n            <div className=\"mb-4\">\r\n              <label htmlFor=\"additionalContributors\" className=\"block text-lg mb-1\">\r\n                Additional Contributor\r\n              </label>\r\n              <input\r\n                id=\"additionalContributors\"\r\n                type=\"text\"\r\n                value={currentContributor}\r\n                onChange={(e) => setCurrentContributor(e.target.value)}\r\n                className=\"bg-black text-white p-2 rounded w-full border border-purple-700\"\r\n              />\r\n              {currentContributor && (\r\n                <p className={`mt-1 text-sm ${contributorValid ? \"text-green-400\" : \"text-red-400\"}`}>\r\n                  {contributorValid ? \"This contributor exists\" : \"This contributor doesn't exist\"}\r\n                </p>\r\n              )}\r\n\r\n              <button\r\n                className=\"mt-2 px-4 py-2 bg-purple-700 rounded hover:bg-purple-800 transition\"\r\n                onClick={() => {\r\n                  if (contributorValid && currentContributor !== \"\") {\r\n                    setContributors([...contributors, currentContributor]);\r\n                    setCurrentContributor(\"\");\r\n                  }\r\n                }}\r\n              >\r\n                Add\r\n              </button>\r\n            </div>\r\n\r\n            {contributors.length > 0 && (\r\n              <div className=\"mb-6\">\r\n                <p className=\"text-lg font-semibold mb-2\">Contributors:</p>\r\n                <ul className=\"space-y-2\">\r\n                  {contributors.map((name, idx) => (\r\n                    <li key={idx} className=\"flex justify-between items-center bg-gray-800 px-3 py-2 rounded\">\r\n                      <span>{name}</span>\r\n                      <button\r\n                        onClick={() =>\r\n                          setContributors(contributors.filter((_, i) => i !== idx))\r\n                        }\r\n                        className=\"text-red-400 hover:text-red-600\"\r\n                      >\r\n                        Remove\r\n                      </button>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n\r\n            <form id=\"submission\" onSubmit={newSubmission} className=\"space-y-4\">\r\n              <div>\r\n                <label htmlFor=\"name\" className=\"block mb-1\">Submission Name</label>\r\n                <input\r\n                  name=\"name\"\r\n                  id=\"name\"\r\n                  type=\"text\"\r\n                  className=\"bg-black text-white p-2 rounded w-full border border-purple-700\"\r\n                />\r\n              </div>\r\n\r\n              {ld.required && ld.required.map((req, key) => {\r\n                console.log(req)\r\n                return (\r\n\r\n                  <div key={key}>\r\n                    <label htmlFor={req.name} className=\"block mb-1\">\r\n                      {req.name} ({req.type})\r\n                    </label>\r\n\r\n                    {req.list === \"yes\" ? (\r\n                      req.amount === \"any\" ? (\r\n                        // Allow dynamic number of inputs\r\n                        <MultipleInputList req={req} />\r\n                      ) : (\r\n                        // Fixed number of inputs\r\n                        Array.from({ length: parseInt(req.amount) || 1 }).map((_, index) => (\r\n                          <div key={index} className=\"mb-2\">\r\n                            <input\r\n                              type={[\"text\", \"link\"].includes(req.type) ? \"text\" : \"file\"}\r\n                              name={`${req.name} ${index}`}\r\n                              id={`${req.name} ${index}`}\r\n                              className=\"bg-black text-white p-2 rounded w-full border border-purple-700\"\r\n                            />\r\n                          </div>\r\n                        ))\r\n                      )\r\n                    ) : (\r\n                      // Single input\r\n                      <input\r\n                        type={[\"text\", \"link\"].includes(req.type) ? \"text\" : \"file\"}\r\n                        name={req.name}\r\n                        id={req.name}\r\n                        className=\"bg-black text-white p-2 rounded w-full border border-purple-700\"\r\n                      />\r\n                    )}\r\n                  </div>\r\n\r\n\r\n                )\r\n            })}\r\n\r\n              <button\r\n                type=\"submit\"\r\n                className=\"px-6 py-2 bg-purple-600 text-white font-semibold rounded hover:bg-purple-700 transition\"\r\n              >\r\n                Submit\r\n              </button>\r\n            </form>\r\n\r\n            <p className=\"text-red-500 mt-2\" id=\"subErrText\"></p>\r\n            <p className=\"text-green-500 mt-1\" id=\"subConfText\"></p>\r\n\r\n            </div>}\r\n\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}